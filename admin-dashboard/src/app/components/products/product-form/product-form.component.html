<div class="product-form-container">
  <div class="page-header">
    <h1>{{ isEditMode ? 'Edit Product' : 'Add New Product' }}</h1>
    <button class="btn btn-secondary" (click)="onCancel()">Cancel</button>
  </div>
  
  <div *ngIf="loading" class="loading-container">
    <div class="loader"></div>
    <p>Loading product data...</p>
  </div>
  
  <form *ngIf="!loading" [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
    <div class="form-grid">
      <div class="form-group">
        <label for="name">Product Name *</label>
        <input 
          type="text" 
          id="name" 
          formControlName="name"
          class="form-control"
          [ngClass]="{'is-invalid': hasError('name', 'required') || hasError('name', 'maxlength')}"
        />
        <div class="invalid-feedback" *ngIf="hasError('name', 'required')">
          Product name is required
        </div>
        <div class="invalid-feedback" *ngIf="hasError('name', 'maxlength')">
          Product name must be less than 100 characters
        </div>
      </div>
      
      <div class="form-group">
        <label for="category">Category *</label>
        <select 
          id="category" 
          formControlName="category"
          class="form-control"
          [ngClass]="{'is-invalid': hasError('category', 'required')}"
        >
          <option value="" disabled>Select a category</option>
          <option *ngFor="let category of categories" [value]="category">
            {{ category | titlecase }}
          </option>
        </select>
        <div class="invalid-feedback" *ngIf="hasError('category', 'required')">
          Please select a category
        </div>
      </div>
      
      <div class="form-group">
        <label for="price">Price ($) *</label>
        <input 
          type="number" 
          id="price" 
          formControlName="price"
          class="form-control"
          [ngClass]="{'is-invalid': hasError('price', 'required') || hasError('price', 'min')}"
          step="0.01"
          min="0.01"
        />
        <div class="invalid-feedback" *ngIf="hasError('price', 'required')">
          Price is required
        </div>
        <div class="invalid-feedback" *ngIf="hasError('price', 'min')">
          Price must be greater than $0.01
        </div>
      </div>
      
      <div class="form-group">
        <label for="stock">Stock *</label>
        <input 
          type="number" 
          id="stock" 
          formControlName="stock"
          class="form-control"
          [ngClass]="{'is-invalid': hasError('stock', 'required') || hasError('stock', 'min')}"
          step="1"
          min="0"
        />
        <div class="invalid-feedback" *ngIf="hasError('stock', 'required')">
          Stock is required
        </div>
        <div class="invalid-feedback" *ngIf="hasError('stock', 'min')">
          Stock cannot be negative
        </div>
      </div>
      
      <div class="form-group full-width">
        <label for="imageUrl">Image URL</label>
        <input 
          type="text" 
          id="imageUrl" 
          formControlName="imageUrl"
          class="form-control"
          placeholder="https://example.com/image.jpg"
        />
        <div class="form-text">Enter a URL for the product image</div>
      </div>
      
      <div class="form-group full-width">
        <label for="description">Description *</label>
        <textarea 
          id="description" 
          formControlName="description"
          class="form-control textarea"
          [ngClass]="{'is-invalid': hasError('description', 'required') || hasError('description', 'maxlength')}"
          rows="5"
        ></textarea>
        <div class="invalid-feedback" *ngIf="hasError('description', 'required')">
          Description is required
        </div>
        <div class="invalid-feedback" *ngIf="hasError('description', 'maxlength')">
          Description must be less than 500 characters
        </div>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="submitting">
        <span *ngIf="submitting" class="spinner"></span>
        {{ isEditMode ? 'Update Product' : 'Create Product' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
    </div>
  </form>
</div>